<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Miner Monitor {{ version }}</title>
    <link rel="stylesheet" type="text/css" href="static/css/style.css">
</head>

<body>
    <h2>Miner Monitor {{ version }}</h2>
    <fieldset class="top" name="add" style="width: 300px;">
        <legend>Add Miner</legend>
        <form action="{{ url_for_ex('add_miner') }}" method="POST">
            <p>
                <label for="ip">IP Address: </label>
                <input required type="text" name="ip">
            </p>
            <p>
                <label for="remarks">Remarks: </label>
                <input type="text" name="remarks">
            </p>
            <p>
                <input type="submit" value="Add model">
            </p>
        </form>
    </fieldset>

    <fieldset class="right top" name="total_hashrate" style="width: 300px; height:130px">
        <legend>Total hashrate per model (5s)</legend>
        <ul>
            {%- for model in total_hash_rate_per_model|sort %}
            <li>
                <u>{{ model }}:</u>
                <strong>{{ total_hash_rate_per_model[model] }}</strong>
            </li>
            {%- endfor %}
        </ul>
    </fieldset>

    <br>
    {%- with messages = get_flashed_messages(category_filter=['error', 'info', 'warning'], with_categories=true) %}
    {% include "messages.html" %}
    {%- endwith %}

    {% include "inactive_miners.html" %}

    <br>

    {% include "active_miners.html" %}
    {%- with messages = get_flashed_messages(category_filter=['verbose'], with_categories=true) %}
    {% include "messages.html" %}
    {%- endwith %}
    <br>
    <i>Generated in {{ loading_time }} seconds.</i>
        <script>
            // Confirm dialog for restart
            function onRestart(restart_url) {
                if (window.confirm("Are you want you want to restart miner?")) {
                    this.document.location.href = restart_url;
                }
            }
        </script>
</body>

</html>